<div x-data="megaMenuComponent()">
    <header class="w-full bg-blue-dark backdrop-blur-md sticky shadow-lg top-0 z-50 transition-all duration-300" 
            x-data="{ scrolled: false }"
            x-init="window.addEventListener('scroll', () => { scrolled = window.scrollY > 10 })"
            :class="{ 'bg-blue-dark/95 shadow-2xl': scrolled }">
        
        <!-- Decorative top line -->
        <div class="absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-orange to-transparent"></div>
        
        <div class="container mx-auto px-4 lg:px-6">
            <div class="flex items-center justify-between h-16 lg:h-20">
                <!-- Logo -->
                <div class="flex-1">
                    <a href="/" title="Ben West Dev" class="group flex items-center">
                       {{ global_details:logo }}
                            <img src="{{ glide:url fit='crop_focal' format='webp' }}" alt="{{ alt }}" class="h-10 lg:h-12 w-auto max-w-[280px] transition-all duration-300 group-hover:brightness-110" />
                        {{ /global_details:logo }}
                    </a>
                </div>

                <!-- Availability Status -->
                 {{ if global_details:available_for_work }}
                <div class="hidden lg:flex items-center space-x-4 text-blue-light text-sm mr-8">
                    <div class="flex items-center space-x-2">
                        <div class="w-2 h-2 bg-orange rounded-full animate-pulse"></div>
                        <span>{{ global_details:work_text }}</span>
                    </div>
                </div>
                {{ /if }}

                <!-- Mega Menu Button -->
                <button @click="toggleMenu()"
                        class="relative p-3 rounded-xl text-blue-light hover:text-orange hover:bg-blue/30 focus:outline-none focus:ring-2 focus:ring-orange/50 transition-all duration-300 group"
                        :class="{ 'bg-orange text-white': isOpen }">
                    <span class="sr-only">Toggle navigation menu</span>
                    <div class="relative w-6 h-6">
                        <span class="absolute top-1 left-0 w-full h-0.5 bg-current transform transition-all duration-300 origin-center"
                              :class="isOpen ? 'rotate-45 translate-y-2' : ''"></span>
                        <span class="absolute top-3 left-0 w-full h-0.5 bg-current transition-opacity duration-300"
                              :class="isOpen ? 'opacity-0' : ''"></span>
                        <span class="absolute top-5 left-0 w-full h-0.5 bg-current transform transition-all duration-300 origin-center"
                              :class="isOpen ? '-rotate-45 -translate-y-2' : ''"></span>
                    </div>
                </button>
            </div>
        </div>
    </header>

    <!-- Mega Menu Overlay -->
    <div x-show="isOpen" 
         class="fixed inset-0 bg-black/50 backdrop-blur-sm z-40"
         x-transition:enter="transition ease-out duration-300"
         x-transition:enter-start="opacity-0"
         x-transition:enter-end="opacity-100"
         x-transition:leave="transition ease-in duration-200"
         x-transition:leave-start="opacity-100"
         x-transition:leave-end="opacity-0"
         @click="closeMenu()"></div>

    <!-- Mega Menu -->
    <div x-show="isOpen" 
         class="fixed top-0 left-0 right-0 bottom-0 z-50 overflow-y-auto"
         x-transition:enter="transition ease-out duration-500"
         x-transition:enter-start="opacity-0 -translate-y-full"
         x-transition:enter-end="opacity-100 translate-y-0"
         x-transition:leave="transition ease-in duration-300"
         x-transition:leave-start="opacity-100 translate-y-0"
         x-transition:leave-end="opacity-0 -translate-y-full">
            
            <!-- Mega Menu Background -->
            <div class="min-h-screen bg-gradient-to-br from-blue-dark via-blue to-blue-dark relative overflow-hidden">
                <!-- Animated background elements -->
                <div class="absolute inset-0 opacity-10">
                    <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-orange rounded-full mix-blend-multiply blur-3xl animate-pulse"></div>
                    <div class="absolute bottom-1/4 right-1/4 w-96 h-96 bg-blue-light rounded-full mix-blend-multiply blur-3xl animate-pulse" style="animation-delay: 2s;"></div>
                    <div class="absolute top-3/4 left-1/2 w-64 h-64 bg-orange/50 rounded-full mix-blend-multiply blur-2xl animate-pulse" style="animation-delay: 4s;"></div>
                </div>

                <!-- Decorative grid -->
                <div class="absolute inset-0 opacity-5">
                    <div class="absolute inset-0" style="background-image: radial-gradient(circle at 1px 1px, rgba(255,255,255,0.3) 1px, transparent 0); background-size: 40px 40px;"></div>
                </div>

                <!-- Header with close button -->
                <div class="sticky top-0 z-10 bg-blue-dark/80 backdrop-blur-md border-b border-orange/20">
                    <div class="container mx-auto px-4 lg:px-6 py-4">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center space-x-4">
                                {{ global_details:logo }}
                                    <img src="{{ glide:url fit='crop_focal' format='webp' }}" alt="{{ alt }}" class="h-8 w-auto max-w-[200px]" />
                                {{ /global_details:logo }}
                            </div>
                            
                            <button @click="closeMenu()"
                                    class="p-2 rounded-lg text-blue-light hover:text-orange hover:bg-blue/30 transition-all duration-300">
                                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Mega Menu Content -->
                <div class="relative z-10 container mx-auto px-4 lg:px-6 py-8">
                    <!-- Hero Section -->
                    <div class="text-center mb-12">
                        <h2 class="text-white font-playfair text-4xl lg:text-5xl font-bold mb-4">
                            Explore My <span class="text-orange">Digital Universe</span>
                        </h2>
                        <p class="text-blue-light text-lg max-w-2xl mx-auto leading-relaxed">
                            Discover my services, portfolio, and expertise in creating exceptional web applications
                        </p>
                    </div>

                    <!-- Stats Row -->
                    <div class="grid grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                        <div class="text-center bg-blue/20 rounded-xl p-4 backdrop-blur-sm border border-blue-light/20 hover:bg-blue/30 transition-all duration-300 hover:scale-105">
                            <div class="text-2xl lg:text-3xl font-bold text-orange mb-2 stat-number">50+</div>
                            <div class="text-blue-light text-sm">Projects Delivered</div>
                        </div>
                        <div class="text-center bg-blue/20 rounded-xl p-4 backdrop-blur-sm border border-blue-light/20 hover:bg-blue/30 transition-all duration-300 hover:scale-105">
                            <div class="text-2xl lg:text-3xl font-bold text-orange mb-2 stat-number">5+</div>
                            <div class="text-blue-light text-sm">Years Experience</div>
                        </div>
                        <div class="text-center bg-blue/20 rounded-xl p-4 backdrop-blur-sm border border-blue-light/20 hover:bg-blue/30 transition-all duration-300 hover:scale-105">
                            <div class="text-2xl lg:text-3xl font-bold text-orange mb-2 stat-number">100%</div>
                            <div class="text-blue-light text-sm">Client Satisfaction</div>
                        </div>
                        <div class="text-center bg-blue/20 rounded-xl p-4 backdrop-blur-sm border border-blue-light/20 hover:bg-blue/30 transition-all duration-300 hover:scale-105">
                            <div class="text-2xl lg:text-3xl font-bold text-orange mb-2 stat-number">24hr</div>
                            <div class="text-blue-light text-sm">Response Time</div>
                        </div>
                    </div>

                    <!-- Main Navigation Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
                        <!-- Navigation Links -->
                        <div class="space-y-6">
                            <h3 class="text-white font-playfair text-xl font-bold mb-4 flex items-center">
                                <svg class="w-5 h-5 text-orange mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                                </svg>
                                Main Pages
                            </h3>
                            {{ nav:main_navigation }}
                                <a href="{{ url }}" 
                                   class="group flex items-center p-4 bg-blue/20 rounded-xl backdrop-blur-sm border border-blue-light/20 hover:bg-blue/40 hover:border-orange/50 transition-all duration-300 hover:scale-105"
                                   @click="closeMenu()">
                                    <div class="flex-1">
                                        <div class="text-white font-semibold mb-1">{{ title }}</div>
                                        <div class="text-blue-light text-sm">{{ if title == 'Home' }}Welcome & introduction{{ elseif title == 'About' }}My story & expertise{{ elseif title == 'Services' }}What I offer{{ elseif title == 'Portfolio' }}My best work{{ elseif title == 'Blog' }}Latest insights{{ elseif title == 'Contact' }}Get in touch{{ else }}Learn more{{ /if }}</div>
                                    </div>
                                    <svg class="w-5 h-5 text-blue-light group-hover:text-orange group-hover:translate-x-1 transition-all duration-300" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                                    </svg>
                                </a>
                            {{ /nav:main_navigation }}
                        </div>

                        <!-- Services -->
                        <div class="space-y-6">
                            <h3 class="text-white font-playfair text-xl font-bold mb-4 flex items-center">
                                <svg class="w-5 h-5 text-orange mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"></path>
                                </svg>
                                Services
                            </h3>
                            {{ nav:services_navigation }}
                                <a href="{{ url }}" 
                                   class="group flex items-center p-3 bg-blue/10 rounded-lg hover:bg-blue/30 transition-all duration-300"
                                   @click="closeMenu()">
                                    <svg class="w-4 h-4 text-orange mr-3 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                                    </svg>
                                    <span class="text-blue-light hover:text-white transition-colors text-sm">{{ title }}</span>
                                </a>
                            {{ /nav:services_navigation }}
                            
                            <!-- Quick Service Links -->
                            <div class="pt-4 border-t border-blue/50">
                                <p class="text-blue-light text-xs font-semibold mb-2">Popular Services</p>
                                <div class="space-y-2">
                                    <a href="/services/laravel" class="block text-blue-light hover:text-orange text-xs transition-colors" @click="closeMenu()">Laravel Development</a>
                                    <a href="/services/react" class="block text-blue-light hover:text-orange text-xs transition-colors" @click="closeMenu()">React Applications</a>
                                    <a href="/services/api" class="block text-blue-light hover:text-orange text-xs transition-colors" @click="closeMenu()">API Integration</a>
                                </div>
                            </div>
                        </div>

                        <!-- Resources & Tools -->
                        <div class="space-y-6">
                            <h3 class="text-white font-playfair text-xl font-bold mb-4 flex items-center">
                                <svg class="w-5 h-5 text-orange mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"></path>
                                </svg>
                                Resources
                            </h3>
                            <div class="space-y-3">
                                <a href="/blog" class="group flex items-center p-3 bg-blue/10 rounded-lg hover:bg-blue/30 transition-all duration-300" @click="closeMenu()">
                                    <svg class="w-4 h-4 text-orange mr-3 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M2 5a2 2 0 012-2h8a2 2 0 012 2v10a2 2 0 002 2H4a2 2 0 01-2-2V5zm3 1h6v4H5V6zm6 6H5v2h6v-2z" clip-rule="evenodd"></path>
                                    </svg>
                                    <div>
                                        <div class="text-white text-sm font-semibold">Technical Blog</div>
                                        <div class="text-blue-light text-xs">Latest insights & tutorials</div>
                                    </div>
                                </a>
                                <a href="/case-studies" class="group flex items-center p-3 bg-blue/10 rounded-lg hover:bg-blue/30 transition-all duration-300" @click="closeMenu()">
                                    <svg class="w-4 h-4 text-orange mr-3 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <div>
                                        <div class="text-white text-sm font-semibold">Case Studies</div>
                                        <div class="text-blue-light text-xs">Real project breakdowns</div>
                                    </div>
                                </a>
                                <a href="/downloads" class="group flex items-center p-3 bg-blue/10 rounded-lg hover:bg-blue/30 transition-all duration-300" @click="closeMenu()">
                                    <svg class="w-4 h-4 text-orange mr-3 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"></path>
                                    </svg>
                                    <div>
                                        <div class="text-white text-sm font-semibold">Free Resources</div>
                                        <div class="text-blue-light text-xs">Templates & tools</div>
                                    </div>
                                </a>
                            </div>

                            <!-- Tech Stack -->
                            <div class="pt-4 border-t border-blue/50">
                                <p class="text-blue-light text-xs font-semibold mb-3">Tech Stack</p>
                                <div class="flex flex-wrap gap-2">
                                    <span class="bg-blue text-blue-light px-2 py-1 rounded-full text-xs border border-blue-light/20 hover:border-orange transition-colors">Laravel</span>
                                    <span class="bg-blue text-blue-light px-2 py-1 rounded-full text-xs border border-blue-light/20 hover:border-orange transition-colors">React</span>
                                    <span class="bg-blue text-blue-light px-2 py-1 rounded-full text-xs border border-blue-light/20 hover:border-orange transition-colors">Vue.js</span>
                                    <span class="bg-blue text-blue-light px-2 py-1 rounded-full text-xs border border-blue-light/20 hover:border-orange transition-colors">Node.js</span>
                                </div>
                            </div>
                        </div>

                        <!-- Contact & Connect -->
                        <div class="space-y-6">
                            <h3 class="text-white font-playfair text-xl font-bold mb-4 flex items-center">
                                <svg class="w-5 h-5 text-orange mr-2" fill="currentColor" viewBox="0 0 20 20">
                                    <path fill-rule="evenodd" d="M7 2a1 1 0 00-.707 1.707L7 4.414v3.758a1 1 0 01-.293.707l-4 4C.817 14.769 2.156 18 4.828 18h10.343c2.673 0 4.012-3.231 2.122-5.121l-4-4A1 1 0 0113 8.172V4.414l.707-.707A1 1 0 0013 2H7zm2 6.172V4h2v4.172a3 3 0 00.879 2.12l1.027 1.028a4 4 0 00-2.171.102l-.47.156a4 4 0 01-2.53 0l-.563-.187a1.993 1.993 0 00-.114-.035l1.063-1.063A3 3 0 009 8.172z" clip-rule="evenodd"></path>
                                </svg>
                                Get In Touch
                            </h3>
                            
                            <!-- Contact Methods -->
                            <div class="space-y-3">
                                <a href="mailto:hello@benwest.dev" class="group flex items-center p-3 bg-blue/10 rounded-lg hover:bg-blue/30 transition-all duration-300">
                                    <svg class="w-4 h-4 text-orange mr-3 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                        <path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path>
                                        <path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path>
                                    </svg>
                                    <div>
                                        <div class="text-white text-sm font-semibold">Email</div>
                                        <div class="text-blue-light text-xs">hello@benwest.dev</div>
                                    </div>
                                </a>
                                
                                <a href="/contact" class="group flex items-center p-3 bg-blue/10 rounded-lg hover:bg-blue/30 transition-all duration-300" @click="closeMenu()">
                                    <svg class="w-4 h-4 text-orange mr-3 group-hover:scale-110 transition-transform" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path>
                                    </svg>
                                    <div>
                                        <div class="text-white text-sm font-semibold">Schedule Call</div>
                                        <div class="text-blue-light text-xs">Free consultation</div>
                                    </div>
                                </a>
                            </div>

                            <!-- Social Links -->
                            <div class="pt-4 border-t border-blue/50">
                                <p class="text-blue-light text-xs font-semibold mb-3">Follow & Connect</p>
                                <div class="grid grid-cols-2 gap-2">
                                    <a href="#" class="bg-blue hover:bg-orange text-white p-2 rounded-lg transition-all duration-300 group flex items-center text-xs hover:scale-105">
                                        <svg class="w-4 h-4 fill-current mr-2 group-hover:scale-110 transition-transform" viewBox="0 0 24 24">
                                            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286z"/>
                                        </svg>
                                        LinkedIn
                                    </a>
                                    <a href="#" class="bg-blue hover:bg-orange text-white p-2 rounded-lg transition-all duration-300 group flex items-center text-xs hover:scale-105">
                                        <svg class="w-4 h-4 fill-current mr-2 group-hover:scale-110 transition-transform" viewBox="0 0 24 24">
                                            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                                        </svg>
                                        GitHub
                                    </a>
                                </div>
                            </div>

                            <!-- Quick CTA -->
                            <div class="pt-4 border-t border-blue/50">
                                <a href="/contact" class="block w-full bg-orange text-white text-center py-3 rounded-xl font-semibold transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-orange/30" @click="closeMenu()">
                                    Start Your Project
                                </a>
                            </div>
                        </div>
                    </div>

                    <!-- Bottom CTA -->
                    <div class="text-center bg-blue/20 rounded-2xl p-8 backdrop-blur-sm border border-blue-light/20">
                        <h3 class="text-white font-playfair text-2xl font-bold mb-4">Ready to Build Something Amazing?</h3>
                        <p class="text-blue-light mb-6 max-w-2xl mx-auto">Let's discuss your project and bring your vision to life with cutting-edge technology and proven expertise.</p>
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <a href="/contact" class="bg-orange text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 hover:scale-105 hover:shadow-2xl hover:shadow-orange/30" @click="closeMenu()">
                                Get Started Today
                            </a>
                            <a href="/portfolio" class="border-2 border-white text-white px-8 py-3 rounded-xl font-semibold transition-all duration-300 hover:bg-white hover:text-blue-dark hover:scale-105" @click="closeMenu()">
                                View My Work
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
